---
description: Every analytics card must include a MetricInfoTooltip explaining what the metric shows and how it is calculated. Apply when creating or modifying any dashboard card, KPI block, chart, or analytics component.
globs: "**/dashboard/**/*.tsx,**/analytics/**/*.tsx,**/sales/**/*.tsx,**/payroll/**/*.tsx,**/client-health/**/*.tsx"
alwaysApply: false
---

# Analytics Info-Tooltip Rule

Every analytics card that surfaces a metric, KPI, or visualization **must** include a `MetricInfoTooltip` in its header next to the card title.

## Component

Import from `@/components/ui/MetricInfoTooltip`:

```tsx
import { MetricInfoTooltip } from '@/components/ui/MetricInfoTooltip';
```

### Props

| Prop | Type | Default | Purpose |
|------|------|---------|---------|
| `description` | `string` | required | What the metric shows + how it is calculated |
| `title` | `string?` | — | Optional bold header (e.g. "How it's calculated") |
| `side` | `'top' \| 'bottom' \| 'left' \| 'right'` | `'top'` | Tooltip placement |
| `className` | `string?` | — | Override icon size (default `w-3 h-3`) |

## Placement

Place the tooltip **immediately after** the card title text, inside a `flex items-center gap-2` wrapper.

### Standard card header (icon-box + CardTitle)

```tsx
<CardHeader className="pb-3">
  <div className="flex items-center gap-3">
    <div className="w-10 h-10 bg-muted flex items-center justify-center rounded-lg">
      <SomeIcon className="w-5 h-5 text-primary" />
    </div>
    <div className="flex items-center gap-2">
      <CardTitle className="font-display text-base tracking-wide">CARD TITLE</CardTitle>
      <MetricInfoTooltip description="What this shows and how it is calculated." />
    </div>
  </div>
</CardHeader>
```

### Custom header (h3 or p title)

```tsx
<div className="flex items-center gap-2">
  <h3 className="font-display text-sm tracking-wide uppercase">Title</h3>
  <MetricInfoTooltip description="..." />
</div>
```

### KPI mini-cards

```tsx
<div className="flex items-center gap-1">
  <p className="text-sm text-muted-foreground">{title}</p>
  <MetricInfoTooltip description="..." />
</div>
```

## Content guidelines

Each tooltip must explain:

1. **What** the metric or visualization shows (one sentence)
2. **How** it is calculated or what data source it uses (one sentence)

Keep descriptions concise (1-3 sentences). Use plain language. No jargon. No emojis.

Good: "Ranks team members by total revenue from completed appointments. Staff below the configurable performance threshold are flagged for attention."

Bad: "This shows your team stats." (too vague, no calculation info)

## Checklist for new analytics cards

- [ ] Card has a `MetricInfoTooltip` next to its title
- [ ] Description explains what and how
- [ ] Tooltip placement follows the patterns above
- [ ] Existing tooltips not removed or broken
